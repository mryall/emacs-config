* Typescript Development
*** Tide - Typescript IDE
    Basic Tide configuration to give us tsserver interaction, code
    formatting, spell checking and auto-completion via company
    #+begin_src emacs-lisp

    (use-package tide
      :ensure t
      :commands (typescript-mode)
      :init
      (defun setup-tide-mode ()
        (interactive)
        (tide-setup)
        (flycheck-mode 1)
        (custom-set-variables '(flycheck-check-syntax-automatically '(save mode-enabled)))
        (eldoc-mode +1)
        (tide-hl-identifier-mode +1)
        (company-mode +1))

      (add-hook 'before-save-hook 'tide-format-before-save)
      (add-hook 'typescript-mode-hook #'setup-tide-mode)
      (add-hook 'typescript-mode-hook #'flyspell-prog-mode)
      :config
      (setq-default company-tooltip-align-annotations t)
      (setq-default typescript-indent-level 2)
      (setq-local flyspell-prog-text-faces '(font-lock-comment-face font-lock-doc-face)))
    #+end_src

*** Node/Typescript Development
    Add some minor modes for more effective node development
    #+begin_src emacs-lisp

    (use-package add-node-modules-path
      :ensure t
      :commands (add-node-modules-path)
      :init
      (add-hook 'typescript-mode-hook #'add-node-modules-path)
      (add-hook 'web-mode-hook #'add-node-modules-path))

    (use-package npm-mode
      :ensure t
      :commands (npm-mode)
      :init
      (add-hook 'typescript-mode-hook #'npm-mode))

    (use-package prettier-js
      :ensure t
      :commands (prettier-js-mode)
      :init
      (add-hook 'typescript-mode-hook #'prettier-js-mode)
      (add-hook 'web-mode-hook #'prettier-js-mode))

    (use-package web-mode
      :ensure t
      :mode (("\\.html?\\'" . web-mode)
             ("\\.tsx\\'" . web-mode)
             ("\\.jsx\\'" . web-mode))
      :config
      (setq web-mode-markup-indent-offset 2
            web-mode-css-indent-offset 2
            web-mode-code-indent-offset 2
            web-mode-block-padding 2
            web-mode-comment-style 2

            web-mode-enable-css-colorization t
            web-mode-enable-auto-pairing t
            web-mode-enable-comment-keywords t
            web-mode-enable-current-element-highlight t
            web-mode-enable-auto-indentation nil)
      (add-hook 'web-mode-hook
                (lambda ()
                  (when (string-equal "tsx" (file-name-extension buffer-file-name))
                    (setup-tide-mode))))
      ;; enable typescript-tslint checker
      (flycheck-add-mode 'typescript-tslint 'web-mode))
    #+end_src
